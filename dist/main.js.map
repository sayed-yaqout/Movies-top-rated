{"version":3,"sources":["main.js"],"names":["MOVIES_API_KEY","moviesComponent","movies","gallery","document","querySelector","template","getElementById","innerHTML","init","fetch","then","res","json","data","elem","moviesData","results","i","length","rendered","Mustache","render","poster","concat","poster_path","Flickity","wrapAround","autoPlay","prevNextButtons","freeScroll","contain","pageDots"],"mappings":"AAAA,aAAA,IAAMA,eACJ,uGAGEC,gBAAmB,WACrB,IAAIC,EACAC,EAAUC,SAASC,cAAc,YACjCC,EAAWF,SAASG,eAAe,cAAcC,UAmCrD,MAAO,CACLC,KAlCF,WASSC,MAAMV,gBAPVW,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACG,GAiBX,IACMC,GAVN,SAAgBC,GACdd,EAASc,EAAWC,QACpB,IAAK,IAAIC,EAAI,EAAGA,EAAIhB,EAAOiB,OAAQD,IAAK,CACtC,IAAIE,EAAWC,SAASC,OAAOhB,EAAU,CACvCiB,OAAM,mCAAAC,OAAqCtB,EAAOgB,GAAGO,eAEvDtB,EAAQK,WAAaY,GAbnBE,CAAOR,GAiBPC,EAAOX,SAASC,cAAc,YACtB,IAAIqB,SAASX,EAAM,CAE7BY,YAAY,EACZC,UAAU,EACVC,iBAAiB,EACjBC,YAAY,EACZC,SAAS,EACTC,UAAU,SAlCO,GA2CvB/B,gBAAgBQ","file":"main.js","sourcesContent":["const MOVIES_API_KEY =\r\n  \"https://api.themoviedb.org/3/movie/top_rated?api_key=4ad8cb5b2b8f3f393d5fbb1e73651f69&language=en-US\";\r\n\r\n//============================================================MOVIES API================================================\\\\\r\nvar moviesComponent = (function () {\r\n  var movies;\r\n  var gallery = document.querySelector(\".gallery\");\r\n  var template = document.getElementById(\"moviestemp\").innerHTML;\r\n\r\n  function init() {\r\n    fetchData()\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        render(data);\r\n        initialize_flickity();\r\n      });\r\n  }\r\n  function fetchData() {\r\n    return fetch(MOVIES_API_KEY);\r\n  }\r\n  function render(moviesData) {\r\n    movies = moviesData.results;\r\n    for (var i = 0; i < movies.length; i++) {\r\n      var rendered = Mustache.render(template, {\r\n        poster: `https://image.tmdb.org/t/p/w200/${movies[i].poster_path}`,\r\n      });\r\n      gallery.innerHTML += rendered;\r\n    }\r\n  }\r\n  function initialize_flickity() {\r\n    var elem = document.querySelector(\".gallery\");\r\n    var flkty = new Flickity(elem, {\r\n      // options\r\n      wrapAround: true,\r\n      autoPlay: true,\r\n      prevNextButtons: false,\r\n      freeScroll: true,\r\n      contain: true,\r\n      pageDots: false,\r\n    });\r\n  }\r\n  \r\n  return {\r\n    init: init,\r\n  };\r\n})();\r\n\r\nmoviesComponent.init();\r\n\r\n// //====================================old script========================================\\\\\r\n// //get fetched data from news API\r\n// let movies;\r\n\r\n// fetch(MOVIES_API_KEY)\r\n//   .then((res) => res.json())\r\n//   .then((data) => initialize(data))\r\n//   .catch((err) => console.log(\"Error\", err));\r\n\r\n// function initialize(moviesData) {\r\n//   console.log(moviesData)\r\n//   movies = moviesData.results;\r\n//   let gallery = document.querySelector(\".gallery\");\r\n//   let template = document.getElementById(\"moviestemp\").innerHTML;\r\n\r\n//   for (let i = 0; i < movies.length; i++) {\r\n//     var rendered = Mustache.render(template, {\r\n//       poster:`https://image.tmdb.org/t/p/w200/${movies[i].poster_path}`\r\n//     });\r\n\r\n//     gallery.innerHTML += rendered;\r\n//   }\r\n// }\r\n\r\n// // Delay in loading flickity plugin\r\n// setTimeout(load_js, 0);\r\n\r\n// function load_js() {\r\n//   // Get the head tag\r\n//   var head_ID = document.getElementsByTagName(\"head\")[0];\r\n//   // Create script element\r\n//   var script_element = document.createElement(\"script\");\r\n//   // Set the script type to JavaScript\r\n//   script_element.type = \"text/javascript\";\r\n//   // External JS file\r\n//   script_element.src = \"https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js\";\r\n//   head_ID.appendChild(script_element);\r\n// }\r\n"]}